<!DOCTYPE html>
<html lang="en">
    

    <!-- 1. Clear the parent element
    2. Call addTodo on every element -->
    
    <head>
        <title>TODO (State)</title>
    </head>

    <body>
        <div>
            <input id="title" type="text" placeholder="Enter Title">
            <br><br>
            <input id="description" type="text" placeholder="Enter Description">
            <br>
            <div id="todos"></div>
        </div>
    </body>

    <script>

        function createChild (title, description, id) {
            const child = document.createElement("div");
            child.setAttribute("id",id);
            const firstGrandChild = document.createElement("h3");
            firstGrandChild.innerHTML = title;
            const secondGrandChild = document.createElement("p");
            secondGrandChild.innerHTML = description;
            const thirdGrandChild = document.createElement("button");
            thirdGrandChild.innerHTML = "Mark as done";
            child.appendChild(firstGrandChild);
            child.appendChild(secondGrandChild);
            child.appendChild(thirdGrandChild);

            return child;
        }

        // State will always be an array
        // Every element of state would have a title, description and id
        function updateDomAccToState (state) {
            const parent = document.getElementById("todos");
            parent.innerHTML = "";

            for(let i=0 ; i<state.length ; i++) {
                const child = createChild(state[i].title, state[i].description, state[i].id);
                parent.appendChild(child);
            }
        }

        // to do things from the backend
        // window.setInterval(async function () {
        //     const response = await fetch(`Backend URL`);
        //     const data = await response;
        //     updateDomAccToState(data.todos);    
        // })

        // Calling updateDomAccToState()
        updateDomAccToState([
            {
                title: "Title 1",
                description: "Description 1",
                id: 1
            }, {
                title: "Title 2",
                description: "Description 2",
                id: 2
            }, {
                title: "Title 5",
                description: "Description 5",
                id: 5
            }
        ]);

    </script>


</html>